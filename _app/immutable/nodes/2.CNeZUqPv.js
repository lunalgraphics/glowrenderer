var ai=Object.defineProperty;var ri=(l,s,n)=>s in l?ai(l,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[s]=n;var ei=(l,s,n)=>ri(l,typeof s!="symbol"?s+"":s,n);import{s as oi,n as mt,r as si,p as ui,o as ci,x as zl,e as Ct}from"../chunks/Dlc_SMu7.js";import{S as pi,i as hi,d as m,y as w,z as R,x as o,A as ti,b as pe,c as i,B as d,w as e,e as a,f as b,h as v,C as P,D as di,j as r,l as g,E as fi,F as mi}from"../chunks/a-XrgLvN.js";import{s as vi,p as gi}from"../chunks/DudbZ5G8.js";const wi=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function _i(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}const bi=""+new URL("../assets/banner_plain.CGipYLbB.png",import.meta.url).href,yi=""+new URL("../assets/coverart.DzlT6CjG.jpg",import.meta.url).href;function Ti(l,s){for(var n=function(L,I){return 255/(255-I)*(L-255)+255},t=l.getImageData(0,0,l.canvas.width,l.canvas.height),u=t.data,h=0;h<u.length;h+=4)for(var f=0;f<3;f++)u[h+f]=n(u[h+f],s);l.putImageData(t,0,0)}const Ci={get url(){return gi.url}};vi.updated.check;const Ii=Ci;class Hl{constructor(s){ei(this,"contentWindow");this.contentWindow=s}static async createEmbed(s,n){let t="";typeof n=="object"?t=JSON.stringify(n):typeof n=="string"&&(t=n);let u=document.createElement("iframe");return u.style.border="0",u.style.width="100%",u.style.height="100%",n?u.src=`https://www.photopea.com/#${encodeURI(t)}`:u.src="https://www.photopea.com/#",s.appendChild(u),await new Promise(function(f,L){let I=H=>{if(H.source==u.contentWindow&&H.data=="done"){let z=new Hl(u.contentWindow);window.removeEventListener("message",I),f(z)}};window.addEventListener("message",I)})}async runScript(s){return await this._pause(),await new Promise((t,u)=>{let h=[],f=L=>{L.source==this.contentWindow&&(h.push(L.data),L.data=="done"&&(window.removeEventListener("message",f),t(h)))};window.addEventListener("message",f),this.contentWindow.postMessage(s,"*")})}async loadAsset(s){return await this._pause(),await new Promise((t,u)=>{let h=[],f=L=>{L.source==this.contentWindow&&(h.push(L.data),L.data=="done"&&(window.removeEventListener("message",f),t(h)))};window.addEventListener("message",f),this.contentWindow.postMessage(s,"*")})}async openFromURL(s,n=!0){await this._pause();let t="done";for(;t=="done";)t=(await this.runScript(`app.echoToOE(${n?"app.activeDocument.layers.length":"app.documents.length"})`))[0];let u=t;for(await this.runScript(`app.open("${s}", null, ${n});`);u==t||u=="done";)u=(await this.runScript(`app.echoToOE(${n?"app.activeDocument.layers.length":"app.documents.length"})`))[0];return["done"]}async exportImage(s="png"){await this._pause();let n="done";for(;n=="done";)n=(await this.runScript(`app.activeDocument.saveToOE("${s}");`))[0];return new Blob([n],{type:"image/"+s})}async _pause(s=10){return await new Promise((n,t)=>{setTimeout(()=>{n()},s)})}}const Li='{"threshold":222,"glowLayers":16,"glowRadius":1,"colorize":false,"tintcolor":"#FF5500","saturation":100,"hue":0,"tintopacity":100,"brightness":100,"anamorph":0}',Pi='{"threshold":49,"glowLayers":7,"glowRadius":7,"colorize":false,"tintcolor":"#FF5500","saturation":100,"hue":0,"tintopacity":100,"brightness":37,"anamorph":0}',Ei='{"threshold":252,"glowLayers":20,"glowRadius":0.4,"colorize":true,"tintcolor":"#0080ff","saturation":100,"hue":0,"tintopacity":100,"brightness":100,"anamorph":0}',Ri='{"threshold":102,"glowLayers":20,"glowRadius":1,"colorize":false,"tintcolor":"#FF5500","saturation":64,"hue":0,"tintopacity":100,"brightness":100,"anamorph":10}',Mi='{"threshold":165,"glowLayers":11,"glowRadius":4.4,"colorize":true,"tintcolor":"#ffbe9e","saturation":100,"hue":0,"tintopacity":100,"brightness":100,"anamorph":0}',{document:It}=wi;function Oi(l,s,n){const t=l.slice();return t[47]=s[n],t[49]=n,t}function ki(l){let s,n="Add to Document",t,u;return{c(){s=r("button"),s.textContent=n,this.h()},l(h){s=a(h,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),P(s)!=="svelte-kgt6gf"&&(s.textContent=n),this.h()},h(){e(s,"id","exportButton"),e(s,"class","svelte-1em5ifc")},m(h,f){pe(h,s,f),t||(u=d(s,"click",l[40]),t=!0)},p:mt,d(h){h&&m(s),t=!1,u()}}}function Ni(l){let s,n="Export Full Image",t,u,h="Export Bloom Layer",f,L;return{c(){s=r("button"),s.textContent=n,t=g(),u=r("button"),u.textContent=h,this.h()},l(I){s=a(I,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),P(s)!=="svelte-b681w1"&&(s.textContent=n),t=v(I),u=a(I,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),P(u)!=="svelte-1r9r0go"&&(u.textContent=h),this.h()},h(){e(s,"id","exportButton"),e(s,"class","svelte-1em5ifc"),e(u,"id","exportButtonLayer"),e(u,"class","svelte-1em5ifc")},m(I,H){pe(I,s,H),pe(I,t,H),pe(I,u,H),f||(L=[d(s,"click",l[38]),d(u,"click",l[39])],f=!0)},p:mt,d(I){I&&(m(s),m(t),m(u)),f=!1,si(L)}}}function li(l){let s,n;return{c(){s=r("img"),this.h()},l(t){s=a(t,"IMG",{src:!0,alt:!0,id:!0,draggable:!0,class:!0}),this.h()},h(){zl(s.src,n=l[0].baseIMG.src)||e(s,"src",n),e(s,"alt","base layer"),e(s,"id","baseImage"),e(s,"draggable","false"),e(s,"class","svelte-1em5ifc"),o(s,"display","block")},m(t,u){pe(t,s,u)},p(t,u){u[0]&1&&!zl(s.src,n=t[0].baseIMG.src)&&e(s,"src",n)},d(t){t&&m(s)}}}function ii(l){let s,n,t,u,h,f,L,I,H,z,U,he=`Copyright (c) 2025 Lunal Graphics<br/>
                Developed by Yikuan Sun`,D,F,S,fe,ee=_i(new Array(6).fill(0)),te=[];for(let k=0;k<ee.length;k+=1)te[k]=Ui(Oi(l,ee,k));let E=!l[5]&&ni(l);return{c(){s=r("div"),n=r("div"),t=r("div"),u=r("input"),h=g(),f=r("div");for(let k=0;k<te.length;k+=1)te[k].c();L=g(),I=r("br"),H=g(),E&&E.c(),z=g(),U=r("div"),U.innerHTML=he,D=g(),F=r("div"),this.h()},l(k){s=a(k,"DIV",{id:!0,class:!0});var le=b(s);n=a(le,"DIV",{style:!0,id:!0,class:!0});var G=b(n);t=a(G,"DIV",{class:!0,style:!0});var ie=b(t);u=a(ie,"INPUT",{type:!0,accept:!0}),h=v(ie),f=a(ie,"DIV",{});var N=b(f);for(let Ue=0;Ue<te.length;Ue+=1)te[Ue].l(N);N.forEach(m),L=v(ie),I=a(ie,"BR",{}),H=v(ie),E&&E.l(ie),ie.forEach(m),z=v(G),U=a(G,"DIV",{id:!0,class:!0,"data-svelte-h":!0}),P(U)!=="svelte-u3tfx3"&&(U.innerHTML=he),G.forEach(m),D=v(le),F=a(le,"DIV",{style:!0}),b(F).forEach(m),le.forEach(m),this.h()},h(){e(u,"type","file"),e(u,"accept","image/*"),o(u,"display","none"),o(f,"position","relative"),o(f,"width","calc(min(512px, 100vw))"),o(f,"height","100px"),e(t,"class","centeredblock svelte-1em5ifc"),o(t,"text-align","center"),e(U,"id","creditsbox"),e(U,"class","svelte-1em5ifc"),o(n,"position","absolute"),o(n,"width","500px"),o(n,"right","0"),o(n,"top","0"),o(n,"height","100vh"),e(n,"id","lsRight"),e(n,"class","svelte-1em5ifc"),o(F,"position","absolute"),o(F,"width","calc(100vw - 500px)"),o(F,"left","0"),o(F,"top","0"),o(F,"height","100vh"),o(F,"background-image","url('"+yi+"')"),o(F,"background-size","cover"),o(F,"background-position","center"),e(s,"id","landingscreen"),e(s,"class","svelte-1em5ifc")},m(k,le){pe(k,s,le),i(s,n),i(n,t),i(t,u),l[44](u),i(t,h),i(t,f);for(let G=0;G<te.length;G+=1)te[G]&&te[G].m(f,null);i(t,L),i(t,I),i(t,H),E&&E.m(t,null),i(n,z),i(n,U),i(s,D),i(s,F),S||(fe=d(u,"change",l[45]),S=!0)},p(k,le){k[5]?E&&(E.d(1),E=null):E?E.p(k,le):(E=ni(k),E.c(),E.m(t,null))},d(k){k&&m(s),l[44](null),fi(te,k),E&&E.d(),S=!1,fe()}}}function Ui(l){let s,n,t=`blur(${l[49]**2*3}px)`;return{c(){s=r("img"),this.h()},l(u){s=a(u,"IMG",{src:!0,alt:!0,width:!0,draggable:!0}),this.h()},h(){zl(s.src,n=bi)||e(s,"src",n),e(s,"alt","SuperBloom"),e(s,"width","100%"),e(s,"draggable","false"),o(s,"position","absolute"),o(s,"top","0"),o(s,"left","0"),o(s,"filter",t),o(s,"mix-blend-mode","screen")},m(u,h){pe(u,s,h)},p:mt,d(u){u&&m(s)}}}function ni(l){let s,n="Upload Image",t,u;return{c(){s=r("button"),s.textContent=n,this.h()},l(h){s=a(h,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),P(s)!=="svelte-ggjk5z"&&(s.textContent=n),this.h()},h(){e(s,"id","uploadButton"),e(s,"class","svelte-1em5ifc")},m(h,f){pe(h,s,f),t||(u=d(s,"click",l[46]),t=!0)},p:mt,d(h){h&&m(s),t=!1,u()}}}function zi(l){let s,n,t,u,h,f,L="Use a Preset",I,H="Import from Computer",z,U,he="Default",D,F="Soft Haze",S,fe="Jedi",ee,te="Cinematic",E,k="Sunset",le,G,ie,N,Ue="Export Preset",vt,T,ye,Te,Lt='<label for="threshold" class="ygui-label svelte-1em5ifc">Threshold</label>',gt,me,Q,wt,x,_t,Ce,Ie,Pt='<label for="glowLayers" class="ygui-label svelte-1em5ifc">Depth</label>',bt,_e,j,yt,A,Tt,Le,Pe,sl='<label for="glowRadius" class="ygui-label svelte-1em5ifc">Radius</label>',Et,c,y,ue,C,ce,ve,Ee,ge='<label for="colorize" class="ygui-label svelte-1em5ifc">Colorize?</label>',al,rt,be,rl,Re,Ve,Dl='<label for="tintcolor" class="ygui-label svelte-1em5ifc">- Color</label>',ol,ot,de,Rt,ul,Me,qe,Fl='<label for="tintopacity" class="ygui-label svelte-1em5ifc">- Opacity</label>',cl,ze,B,Mt,pl,V,Ot,hl,We,Je,Sl='<label for="brightness" class="ygui-label svelte-1em5ifc">Brightness</label>',dl,He,J,fl,ne,ml,Ke,Ye,Ql='<label for="saturation" class="ygui-label svelte-1em5ifc">Saturation</label>',vl,De,K,gl,se,wl,Xe,Ze,jl='<label for="hue" class="ygui-label svelte-1em5ifc">Hue Shift</label>',_l,Fe,Y,bl,ae,yl,$e,et,Bl='<label for="anamorph" class="ygui-label svelte-1em5ifc">Anamorph</label>',Tl,Se,X,Cl,re,Il,ut,Gl='<td colspan="2" class="svelte-1em5ifc"><span class="ygui-label svelte-1em5ifc">Preview</span></td>',Ll,tt,lt,xl='<label for="showPreview" class="ygui-label svelte-1em5ifc">- Mode</label>',Pl,ct,Z,Oe,Al="Full",ke,Vl="None",Ne,ql="Glow Only",El,it,nt,Wl='<label for="previewQuality" class="ygui-label svelte-1em5ifc">- Quality</label>',Rl,Qe,$,Ml,oe,Ol,je,kt,M,Nt,st,kl,Be,Nl,Ge,Ut,pt,ht,at,dt,Ul,Jl;function Kl(p,_){return p[5]?ki:Ni}let zt=Kl(l),we=zt(l),q=l[0].baseIMG&&l[0].showPreview=="None"&&li(l),W=l[7]&&ii(l);return{c(){s=r("div"),n=r("div"),t=r("input"),u=g(),h=r("select"),f=r("option"),f.textContent=L,I=r("option"),I.textContent=H,z=r("optgroup"),U=r("option"),U.textContent=he,D=r("option"),D.textContent=F,S=r("option"),S.textContent=fe,ee=r("option"),ee.textContent=te,E=r("option"),E.textContent=k,le=g(),G=r("br"),ie=g(),N=r("button"),N.textContent=Ue,vt=g(),T=r("table"),ye=r("tr"),Te=r("td"),Te.innerHTML=Lt,gt=g(),me=r("td"),Q=r("input"),wt=g(),x=r("input"),_t=g(),Ce=r("tr"),Ie=r("td"),Ie.innerHTML=Pt,bt=g(),_e=r("td"),j=r("input"),yt=g(),A=r("input"),Tt=g(),Le=r("tr"),Pe=r("td"),Pe.innerHTML=sl,Et=g(),c=r("td"),y=r("input"),ue=g(),C=r("input"),ce=g(),ve=r("tr"),Ee=r("td"),Ee.innerHTML=ge,al=g(),rt=r("td"),be=r("input"),rl=g(),Re=r("tr"),Ve=r("td"),Ve.innerHTML=Dl,ol=g(),ot=r("td"),de=r("input"),ul=g(),Me=r("tr"),qe=r("td"),qe.innerHTML=Fl,cl=g(),ze=r("td"),B=r("input"),pl=g(),V=r("input"),hl=g(),We=r("tr"),Je=r("td"),Je.innerHTML=Sl,dl=g(),He=r("td"),J=r("input"),fl=g(),ne=r("input"),ml=g(),Ke=r("tr"),Ye=r("td"),Ye.innerHTML=Ql,vl=g(),De=r("td"),K=r("input"),gl=g(),se=r("input"),wl=g(),Xe=r("tr"),Ze=r("td"),Ze.innerHTML=jl,_l=g(),Fe=r("td"),Y=r("input"),bl=g(),ae=r("input"),yl=g(),$e=r("tr"),et=r("td"),et.innerHTML=Bl,Tl=g(),Se=r("td"),X=r("input"),Cl=g(),re=r("input"),Il=g(),ut=r("tr"),ut.innerHTML=Gl,Ll=g(),tt=r("tr"),lt=r("td"),lt.innerHTML=xl,Pl=g(),ct=r("td"),Z=r("select"),Oe=r("option"),Oe.textContent=Al,ke=r("option"),ke.textContent=Vl,Ne=r("option"),Ne.textContent=ql,El=g(),it=r("tr"),nt=r("td"),nt.innerHTML=Wl,Rl=g(),Qe=r("td"),$=r("input"),Ml=g(),oe=r("input"),Ol=g(),je=r("div"),we.c(),kt=g(),M=r("div"),q&&q.c(),Nt=g(),st=r("canvas"),kl=g(),Be=r("canvas"),Nl=g(),Ge=r("canvas"),Ut=g(),W&&W.c(),pt=g(),ht=r("link"),at=r("link"),dt=r("link"),this.h()},l(p){s=a(p,"DIV",{id:!0,class:!0});var _=b(s);n=a(_,"DIV",{});var xe=b(n);t=a(xe,"INPUT",{type:!0,accept:!0}),u=v(xe),h=a(xe,"SELECT",{class:!0});var Ht=b(h);f=a(Ht,"OPTION",{"data-svelte-h":!0}),P(f)!=="svelte-7qz7yz"&&(f.textContent=L),I=a(Ht,"OPTION",{"data-svelte-h":!0}),P(I)!=="svelte-bimjx4"&&(I.textContent=H),z=a(Ht,"OPTGROUP",{label:!0});var ft=b(z);U=a(ft,"OPTION",{"data-svelte-h":!0}),P(U)!=="svelte-1p6xbtl"&&(U.textContent=he),D=a(ft,"OPTION",{"data-svelte-h":!0}),P(D)!=="svelte-yfx0il"&&(D.textContent=F),S=a(ft,"OPTION",{"data-svelte-h":!0}),P(S)!=="svelte-zd7vk7"&&(S.textContent=fe),ee=a(ft,"OPTION",{"data-svelte-h":!0}),P(ee)!=="svelte-185h7rt"&&(ee.textContent=te),E=a(ft,"OPTION",{"data-svelte-h":!0}),P(E)!=="svelte-qkqj7j"&&(E.textContent=k),ft.forEach(m),Ht.forEach(m),le=v(xe),G=a(xe,"BR",{uh:!0}),ie=v(xe),N=a(xe,"BUTTON",{class:!0,"data-svelte-h":!0}),P(N)!=="svelte-1tbcrlx"&&(N.textContent=Ue),xe.forEach(m),vt=v(_),T=a(_,"TABLE",{class:!0});var O=b(T);ye=a(O,"TR",{});var Dt=b(ye);Te=a(Dt,"TD",{class:!0,"data-svelte-h":!0}),P(Te)!=="svelte-7zth2p"&&(Te.innerHTML=Lt),gt=v(Dt),me=a(Dt,"TD",{class:!0});var Ft=b(me);Q=a(Ft,"INPUT",{type:!0,min:!0,max:!0,step:!0}),wt=v(Ft),x=a(Ft,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),Ft.forEach(m),Dt.forEach(m),_t=v(O),Ce=a(O,"TR",{});var St=b(Ce);Ie=a(St,"TD",{class:!0,"data-svelte-h":!0}),P(Ie)!=="svelte-xotzn5"&&(Ie.innerHTML=Pt),bt=v(St),_e=a(St,"TD",{class:!0});var Qt=b(_e);j=a(Qt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),yt=v(Qt),A=a(Qt,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),Qt.forEach(m),St.forEach(m),Tt=v(O),Le=a(O,"TR",{});var jt=b(Le);Pe=a(jt,"TD",{class:!0,"data-svelte-h":!0}),P(Pe)!=="svelte-1fbrydi"&&(Pe.innerHTML=sl),Et=v(jt),c=a(jt,"TD",{class:!0});var Bt=b(c);y=a(Bt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),ue=v(Bt),C=a(Bt,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),Bt.forEach(m),jt.forEach(m),ce=v(O),ve=a(O,"TR",{});var Gt=b(ve);Ee=a(Gt,"TD",{class:!0,"data-svelte-h":!0}),P(Ee)!=="svelte-1jclbmq"&&(Ee.innerHTML=ge),al=v(Gt),rt=a(Gt,"TD",{class:!0});var Yl=b(rt);be=a(Yl,"INPUT",{type:!0,id:!0,class:!0}),Yl.forEach(m),Gt.forEach(m),rl=v(O),Re=a(O,"TR",{});var xt=b(Re);Ve=a(xt,"TD",{class:!0,"data-svelte-h":!0}),P(Ve)!=="svelte-4c4edf"&&(Ve.innerHTML=Dl),ol=v(xt),ot=a(xt,"TD",{class:!0});var Xl=b(ot);de=a(Xl,"INPUT",{type:!0,id:!0,class:!0}),Xl.forEach(m),xt.forEach(m),ul=v(O),Me=a(O,"TR",{});var At=b(Me);qe=a(At,"TD",{class:!0,"data-svelte-h":!0}),P(qe)!=="svelte-1d3zkgn"&&(qe.innerHTML=Fl),cl=v(At),ze=a(At,"TD",{class:!0});var Vt=b(ze);B=a(Vt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),pl=v(Vt),V=a(Vt,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),Vt.forEach(m),At.forEach(m),hl=v(O),We=a(O,"TR",{});var qt=b(We);Je=a(qt,"TD",{class:!0,"data-svelte-h":!0}),P(Je)!=="svelte-1yvz8jb"&&(Je.innerHTML=Sl),dl=v(qt),He=a(qt,"TD",{class:!0});var Wt=b(He);J=a(Wt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),fl=v(Wt),ne=a(Wt,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),Wt.forEach(m),qt.forEach(m),ml=v(O),Ke=a(O,"TR",{});var Jt=b(Ke);Ye=a(Jt,"TD",{class:!0,"data-svelte-h":!0}),P(Ye)!=="svelte-nyadpl"&&(Ye.innerHTML=Ql),vl=v(Jt),De=a(Jt,"TD",{class:!0});var Kt=b(De);K=a(Kt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),gl=v(Kt),se=a(Kt,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),Kt.forEach(m),Jt.forEach(m),wl=v(O),Xe=a(O,"TR",{});var Yt=b(Xe);Ze=a(Yt,"TD",{class:!0,"data-svelte-h":!0}),P(Ze)!=="svelte-e78jql"&&(Ze.innerHTML=jl),_l=v(Yt),Fe=a(Yt,"TD",{class:!0});var Xt=b(Fe);Y=a(Xt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),bl=v(Xt),ae=a(Xt,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),Xt.forEach(m),Yt.forEach(m),yl=v(O),$e=a(O,"TR",{});var Zt=b($e);et=a(Zt,"TD",{class:!0,"data-svelte-h":!0}),P(et)!=="svelte-7w5b71"&&(et.innerHTML=Bl),Tl=v(Zt),Se=a(Zt,"TD",{class:!0});var $t=b(Se);X=a($t,"INPUT",{type:!0,min:!0,max:!0,step:!0}),Cl=v($t),re=a($t,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),$t.forEach(m),Zt.forEach(m),Il=v(O),ut=a(O,"TR",{"data-svelte-h":!0}),P(ut)!=="svelte-u1124t"&&(ut.innerHTML=Gl),Ll=v(O),tt=a(O,"TR",{});var el=b(tt);lt=a(el,"TD",{class:!0,"data-svelte-h":!0}),P(lt)!=="svelte-1j2g2v0"&&(lt.innerHTML=xl),Pl=v(el),ct=a(el,"TD",{class:!0});var Zl=b(ct);Z=a(Zl,"SELECT",{id:!0,class:!0,type:!0});var tl=b(Z);Oe=a(tl,"OPTION",{"data-svelte-h":!0}),P(Oe)!=="svelte-symo06"&&(Oe.textContent=Al),ke=a(tl,"OPTION",{"data-svelte-h":!0}),P(ke)!=="svelte-qtemz2"&&(ke.textContent=Vl),Ne=a(tl,"OPTION",{"data-svelte-h":!0}),P(Ne)!=="svelte-rtsc0g"&&(Ne.textContent=ql),tl.forEach(m),Zl.forEach(m),el.forEach(m),El=v(O),it=a(O,"TR",{});var ll=b(it);nt=a(ll,"TD",{class:!0,"data-svelte-h":!0}),P(nt)!=="svelte-18ezv3g"&&(nt.innerHTML=Wl),Rl=v(ll),Qe=a(ll,"TD",{class:!0});var il=b(Qe);$=a(il,"INPUT",{type:!0,min:!0,max:!0,step:!0}),Ml=v(il),oe=a(il,"INPUT",{type:!0,id:!0,class:!0,min:!0,max:!0,step:!0}),il.forEach(m),ll.forEach(m),O.forEach(m),Ol=v(_),je=a(_,"DIV",{id:!0,class:!0});var $l=b(je);we.l($l),$l.forEach(m),_.forEach(m),kt=v(p),M=a(p,"DIV",{style:!0,id:!0,class:!0});var Ae=b(M);q&&q.l(Ae),Nt=v(Ae),st=a(Ae,"CANVAS",{class:!0}),b(st).forEach(m),kl=v(Ae),Be=a(Ae,"CANVAS",{class:!0}),b(Be).forEach(m),Nl=v(Ae),Ge=a(Ae,"CANVAS",{class:!0}),b(Ge).forEach(m),Ae.forEach(m),Ut=v(p),W&&W.l(p),pt=v(p);const nl=di("svelte-iaxz2n",It.head);ht=a(nl,"LINK",{rel:!0,href:!0}),at=a(nl,"LINK",{rel:!0,href:!0,crossorigin:!0}),dt=a(nl,"LINK",{href:!0,rel:!0}),nl.forEach(m),this.h()},h(){e(t,"type","file"),e(t,"accept","application/json"),o(t,"display","none"),f.selected=!0,f.hidden=!0,f.__value="nothing",w(f,f.__value),I.__value="IMPORT_FROM_COMPUTER",w(I,I.__value),U.__value=Li,w(U,U.__value),D.__value=Pi,w(D,D.__value),S.__value=Ei,w(S,S.__value),ee.__value=Ri,w(ee,ee.__value),E.__value=Mi,w(E,E.__value),e(z,"label","Built-in presets"),e(h,"class","ygui-input svelte-1em5ifc"),o(h,"width","calc(100% - 30px)"),o(h,"text-align","center"),o(h,"font-size","14px"),e(G,"uh",""),e(N,"class","ygui-input svelte-1em5ifc"),o(N,"width","calc(100% - 30px)"),o(N,"text-align","center"),o(N,"font-weight","400"),o(N,"text-transform","none"),o(N,"background-color","var(--field-color)!important"),o(N,"border-radius","0"),o(N,"letter-spacing","0"),o(N,"font-size","14px"),o(N,"cursor","pointer"),o(n,"width","100%"),o(n,"padding-bottom","15px"),o(n,"text-align","center"),o(n,"color","whitesmoke"),o(n,"font-family","var(--ux-font)"),e(Te,"class","svelte-1em5ifc"),e(Q,"type","range"),e(Q,"min","0"),e(Q,"max","254"),e(Q,"step","1"),o(Q,"accent-color","var(--special-color)"),o(Q,"width","69px"),o(Q,"margin-right","5px"),e(x,"type","number"),e(x,"id","threshold"),e(x,"class","ygui-input svelte-1em5ifc"),e(x,"min","0"),e(x,"max","254"),e(x,"step","1"),e(me,"class","svelte-1em5ifc"),o(me,"width","143px"),e(Ie,"class","svelte-1em5ifc"),e(j,"type","range"),e(j,"min","1"),e(j,"max","24"),e(j,"step","1"),o(j,"accent-color","var(--special-color)"),o(j,"width","69px"),o(j,"margin-right","5px"),e(A,"type","number"),e(A,"id","glowLayers"),e(A,"class","ygui-input svelte-1em5ifc"),e(A,"min","1"),e(A,"max","24"),e(A,"step","1"),e(_e,"class","svelte-1em5ifc"),e(Pe,"class","svelte-1em5ifc"),e(y,"type","range"),e(y,"min","0"),e(y,"max","12"),e(y,"step","0.1"),o(y,"accent-color","var(--special-color)"),o(y,"width","69px"),o(y,"margin-right","5px"),e(C,"type","number"),e(C,"id","glowRadius"),e(C,"class","ygui-input svelte-1em5ifc"),e(C,"min","0"),e(C,"max","12"),e(C,"step","0.1"),e(c,"class","svelte-1em5ifc"),e(Ee,"class","svelte-1em5ifc"),e(be,"type","checkbox"),e(be,"id","colorize"),e(be,"class","ygui-input svelte-1em5ifc"),e(rt,"class","svelte-1em5ifc"),e(Ve,"class","svelte-1em5ifc"),e(de,"type","color"),e(de,"id","tintcolor"),e(de,"class","ygui-input svelte-1em5ifc"),de.disabled=Rt=!l[0].colorize,e(ot,"class","svelte-1em5ifc"),o(Re,"opacity",l[0].colorize?"1":"0.5"),e(qe,"class","svelte-1em5ifc"),e(B,"type","range"),e(B,"min","0"),e(B,"max","100"),e(B,"step","1"),B.disabled=Mt=!l[0].colorize,o(B,"accent-color","var(--special-color)"),o(B,"width","69px"),o(B,"margin-right","5px"),e(V,"type","number"),e(V,"id","tintopacity"),e(V,"class","ygui-input svelte-1em5ifc"),e(V,"min","0"),e(V,"max","100"),e(V,"step","1"),V.disabled=Ot=!l[0].colorize,e(ze,"class","svelte-1em5ifc"),o(Me,"opacity",l[0].colorize?"1":"0.5"),e(Je,"class","svelte-1em5ifc"),e(J,"type","range"),e(J,"min","0"),e(J,"max","200"),e(J,"step","1"),o(J,"accent-color","var(--special-color)"),o(J,"width","69px"),o(J,"margin-right","5px"),e(ne,"type","number"),e(ne,"id","brightness"),e(ne,"class","ygui-input svelte-1em5ifc"),e(ne,"min","0"),e(ne,"max","200"),e(ne,"step","1"),e(He,"class","svelte-1em5ifc"),e(Ye,"class","svelte-1em5ifc"),e(K,"type","range"),e(K,"min","0"),e(K,"max","100"),e(K,"step","1"),o(K,"accent-color","var(--special-color)"),o(K,"width","69px"),o(K,"margin-right","5px"),e(se,"type","number"),e(se,"id","saturation"),e(se,"class","ygui-input svelte-1em5ifc"),e(se,"min","0"),e(se,"max","100"),e(se,"step","1"),e(De,"class","svelte-1em5ifc"),e(Ze,"class","svelte-1em5ifc"),e(Y,"type","range"),e(Y,"min","-180"),e(Y,"max","180"),e(Y,"step","1"),o(Y,"accent-color","var(--special-color)"),o(Y,"width","69px"),o(Y,"margin-right","5px"),e(ae,"type","number"),e(ae,"id","hue"),e(ae,"class","ygui-input svelte-1em5ifc"),e(ae,"min","-180"),e(ae,"max","180"),e(ae,"step","1"),e(Fe,"class","svelte-1em5ifc"),e(et,"class","svelte-1em5ifc"),e(X,"type","range"),e(X,"min","0"),e(X,"max","10"),e(X,"step","0.5"),o(X,"accent-color","var(--special-color)"),o(X,"width","69px"),o(X,"margin-right","5px"),e(re,"type","number"),e(re,"id","anamorph"),e(re,"class","ygui-input svelte-1em5ifc"),e(re,"min","0"),e(re,"max","10"),e(re,"step","0.5"),e(Se,"class","svelte-1em5ifc"),e(lt,"class","svelte-1em5ifc"),Oe.__value="Full",w(Oe,Oe.__value),ke.__value="None",w(ke,ke.__value),Ne.__value="Glow Only",w(Ne,Ne.__value),e(Z,"id","showPreview"),e(Z,"class","ygui-input svelte-1em5ifc"),e(Z,"type","select"),l[0].showPreview===void 0&&ui(()=>l[35].call(Z)),e(ct,"class","svelte-1em5ifc"),e(nt,"class","svelte-1em5ifc"),e($,"type","range"),e($,"min","0.1"),e($,"max","1"),e($,"step","0.01"),o($,"accent-color","var(--special-color)"),o($,"width","69px"),o($,"margin-right","5px"),e(oe,"type","number"),e(oe,"id","previewQuality"),e(oe,"class","ygui-input svelte-1em5ifc"),e(oe,"min","0.1"),e(oe,"max","1"),e(oe,"step","0.01"),e(Qe,"class","svelte-1em5ifc"),e(T,"class","ygui-table svelte-1em5ifc"),o(T,"width","100%"),e(je,"id","exportpanel"),e(je,"class","svelte-1em5ifc"),e(s,"id","guicontainer"),e(s,"class","svelte-1em5ifc"),e(st,"class","svelte-1em5ifc"),o(st,"display","none"),e(Be,"class","svelte-1em5ifc"),o(Be,"display",l[0].showPreview=="Glow Only"?"block":"none"),e(Ge,"class","svelte-1em5ifc"),o(Ge,"display",l[0].showPreview=="Full"?"block":"none"),o(M,"position","fixed"),o(M,"left","0"),o(M,"top","0"),o(M,"height","100vh"),o(M,"width","calc(100vw - 250px)"),o(M,"text-align","center"),e(M,"id","previewSpace"),e(M,"class","svelte-1em5ifc"),o(M,"display","flex"),o(M,"justify-content","center"),o(M,"align-items","center"),o(M,"padding","25px"),o(M,"box-sizing","border-box"),It.title="SuperBloom",e(ht,"rel","preconnect"),e(ht,"href","https://fonts.googleapis.com"),e(at,"rel","preconnect"),e(at,"href","https://fonts.gstatic.com"),e(at,"crossorigin",""),e(dt,"href","https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"),e(dt,"rel","stylesheet")},m(p,_){pe(p,s,_),i(s,n),i(n,t),l[14](t),i(n,u),i(n,h),i(h,f),i(h,I),i(h,z),i(z,U),i(z,D),i(z,S),i(z,ee),i(z,E),i(n,le),i(n,G),i(n,ie),i(n,N),i(s,vt),i(s,T),i(T,ye),i(ye,Te),i(ye,gt),i(ye,me),i(me,Q),w(Q,l[0].threshold),i(me,wt),i(me,x),w(x,l[0].threshold),i(T,_t),i(T,Ce),i(Ce,Ie),i(Ce,bt),i(Ce,_e),i(_e,j),w(j,l[0].glowLayers),i(_e,yt),i(_e,A),w(A,l[0].glowLayers),i(T,Tt),i(T,Le),i(Le,Pe),i(Le,Et),i(Le,c),i(c,y),w(y,l[0].glowRadius),i(c,ue),i(c,C),w(C,l[0].glowRadius),i(T,ce),i(T,ve),i(ve,Ee),i(ve,al),i(ve,rt),i(rt,be),be.checked=l[0].colorize,i(T,rl),i(T,Re),i(Re,Ve),i(Re,ol),i(Re,ot),i(ot,de),w(de,l[0].tintcolor),i(T,ul),i(T,Me),i(Me,qe),i(Me,cl),i(Me,ze),i(ze,B),w(B,l[0].tintopacity),i(ze,pl),i(ze,V),w(V,l[0].tintopacity),i(T,hl),i(T,We),i(We,Je),i(We,dl),i(We,He),i(He,J),w(J,l[0].brightness),i(He,fl),i(He,ne),w(ne,l[0].brightness),i(T,ml),i(T,Ke),i(Ke,Ye),i(Ke,vl),i(Ke,De),i(De,K),w(K,l[0].saturation),i(De,gl),i(De,se),w(se,l[0].saturation),i(T,wl),i(T,Xe),i(Xe,Ze),i(Xe,_l),i(Xe,Fe),i(Fe,Y),w(Y,l[0].hue),i(Fe,bl),i(Fe,ae),w(ae,l[0].hue),i(T,yl),i(T,$e),i($e,et),i($e,Tl),i($e,Se),i(Se,X),w(X,l[0].anamorph),i(Se,Cl),i(Se,re),w(re,l[0].anamorph),i(T,Il),i(T,ut),i(T,Ll),i(T,tt),i(tt,lt),i(tt,Pl),i(tt,ct),i(ct,Z),i(Z,Oe),i(Z,ke),i(Z,Ne),ti(Z,l[0].showPreview,!0),i(T,El),i(T,it),i(it,nt),i(it,Rl),i(it,Qe),i(Qe,$),w($,l[0].previewQuality),i(Qe,Ml),i(Qe,oe),w(oe,l[0].previewQuality),i(s,Ol),i(s,je),we.m(je,null),pe(p,kt,_),pe(p,M,_),q&&q.m(M,null),i(M,Nt),i(M,st),l[41](st),i(M,kl),i(M,Be),l[42](Be),i(M,Nl),i(M,Ge),l[43](Ge),pe(p,Ut,_),W&&W.m(p,_),pe(p,pt,_),i(It.head,ht),i(It.head,at),i(It.head,dt),Ul||(Jl=[d(t,"change",l[15]),d(h,"change",l[16]),d(N,"click",l[12]),d(Q,"change",l[17]),d(Q,"input",l[17]),d(Q,"input",l[10]),d(x,"input",l[18]),d(x,"input",l[10]),d(j,"change",l[19]),d(j,"input",l[19]),d(j,"input",l[10]),d(A,"input",l[20]),d(A,"input",l[10]),d(y,"change",l[21]),d(y,"input",l[21]),d(y,"input",l[10]),d(C,"input",l[22]),d(C,"input",l[10]),d(be,"change",l[23]),d(be,"change",l[10]),d(de,"input",l[24]),d(de,"input",l[10]),d(B,"change",l[25]),d(B,"input",l[25]),d(B,"input",l[10]),d(V,"input",l[26]),d(V,"input",l[10]),d(J,"change",l[27]),d(J,"input",l[27]),d(J,"input",l[10]),d(ne,"input",l[28]),d(ne,"input",l[10]),d(K,"change",l[29]),d(K,"input",l[29]),d(K,"input",l[10]),d(se,"input",l[30]),d(se,"input",l[10]),d(Y,"change",l[31]),d(Y,"input",l[31]),d(Y,"input",l[10]),d(ae,"input",l[32]),d(ae,"input",l[10]),d(X,"change",l[33]),d(X,"input",l[33]),d(X,"input",l[10]),d(re,"input",l[34]),d(re,"input",l[10]),d(Z,"change",l[35]),d(Z,"change",l[10]),d($,"change",l[36]),d($,"input",l[36]),d($,"input",l[10]),d(oe,"input",l[37]),d(oe,"input",l[10])],Ul=!0)},p(p,_){_[0]&1&&w(Q,p[0].threshold),_[0]&1&&R(x.value)!==p[0].threshold&&w(x,p[0].threshold),_[0]&1&&w(j,p[0].glowLayers),_[0]&1&&R(A.value)!==p[0].glowLayers&&w(A,p[0].glowLayers),_[0]&1&&w(y,p[0].glowRadius),_[0]&1&&R(C.value)!==p[0].glowRadius&&w(C,p[0].glowRadius),_[0]&1&&(be.checked=p[0].colorize),_[0]&1&&Rt!==(Rt=!p[0].colorize)&&(de.disabled=Rt),_[0]&1&&w(de,p[0].tintcolor),_[0]&1&&o(Re,"opacity",p[0].colorize?"1":"0.5"),_[0]&1&&Mt!==(Mt=!p[0].colorize)&&(B.disabled=Mt),_[0]&1&&w(B,p[0].tintopacity),_[0]&1&&Ot!==(Ot=!p[0].colorize)&&(V.disabled=Ot),_[0]&1&&R(V.value)!==p[0].tintopacity&&w(V,p[0].tintopacity),_[0]&1&&o(Me,"opacity",p[0].colorize?"1":"0.5"),_[0]&1&&w(J,p[0].brightness),_[0]&1&&R(ne.value)!==p[0].brightness&&w(ne,p[0].brightness),_[0]&1&&w(K,p[0].saturation),_[0]&1&&R(se.value)!==p[0].saturation&&w(se,p[0].saturation),_[0]&1&&w(Y,p[0].hue),_[0]&1&&R(ae.value)!==p[0].hue&&w(ae,p[0].hue),_[0]&1&&w(X,p[0].anamorph),_[0]&1&&R(re.value)!==p[0].anamorph&&w(re,p[0].anamorph),_[0]&1&&ti(Z,p[0].showPreview),_[0]&1&&w($,p[0].previewQuality),_[0]&1&&R(oe.value)!==p[0].previewQuality&&w(oe,p[0].previewQuality),zt===(zt=Kl(p))&&we?we.p(p,_):(we.d(1),we=zt(p),we&&(we.c(),we.m(je,null))),p[0].baseIMG&&p[0].showPreview=="None"?q?q.p(p,_):(q=li(p),q.c(),q.m(M,Nt)):q&&(q.d(1),q=null),_[0]&1&&o(Be,"display",p[0].showPreview=="Glow Only"?"block":"none"),_[0]&1&&o(Ge,"display",p[0].showPreview=="Full"?"block":"none"),p[7]?W?W.p(p,_):(W=ii(p),W.c(),W.m(pt.parentNode,pt)):W&&(W.d(1),W=null)},i:mt,o:mt,d(p){p&&(m(s),m(kt),m(M),m(Ut),m(pt)),l[14](null),we.d(),q&&q.d(),l[41](null),l[42](null),l[43](null),W&&W.d(p),m(ht),m(at),m(dt),Ul=!1,si(Jl)}}}function Hi(l,s,n){let t={threshold:222,glowLayers:16,glowRadius:1,colorize:!1,tintcolor:"#FF5500",showPreview:"Full",imgname:"",saturation:100,hue:0,tintopacity:100,brightness:100,previewQuality:.75,anamorph:0},u,h,f;function L(c=t,y=()=>{},ue=!1){typeof c=="string"&&(c=JSON.parse(c)),n(1,u.width=c.baseIMG.width*c.previewQuality,u),n(1,u.height=c.baseIMG.height*c.previewQuality,u);var C=u.getContext("2d");C.restore(),C.drawImage(c.baseIMG,0,0,u.width,u.height),C.save(),c.threshold<255?Ti(C,c.threshold):C.fillRect(0,0,u.width,u.height),c.colorize&&(C.restore(),C.save(),C.globalAlpha=c.tintopacity/100,C.fillStyle=c.tintcolor,C.globalCompositeOperation="color",C.fillRect(0,0,u.width,u.height),C.globalCompositeOperation="multiply",C.fillRect(0,0,u.width,u.height)),n(2,h.width=u.width,h),n(2,h.height=u.height,h);var ce=h.getContext("2d");ce.clearRect(0,0,h.width,h.height),ce.save();for(var ve=1;ve<c.glowLayers;ve++){var Ee=(ve+1)**2*c.glowRadius*c.previewQuality;ce.restore(),ce.save(),ce.filter=`brightness(${c.brightness}%) hue-rotate(${c.hue}deg) saturate(${c.saturation}%) blur(${Ee}px)`,ce.globalCompositeOperation="screen",ce.drawImage(u,0,0,h.width/(c.anamorph+1),h.height)}if(ce.restore(),ce.drawImage(h,0,0,h.width*(c.anamorph+1),h.height),ue){y();return}n(3,f.width=u.width,f),n(3,f.height=u.height,f);let ge=f.getContext("2d");ge.restore(),ge.save(),ge.clearRect(0,0,f.width,f.height),ge.drawImage(c.baseIMG,0,0,f.width,f.height),ge.globalCompositeOperation="screen",ge.drawImage(h,0,0,f.width,f.height),ge.restore(),ge.save(),y()}function I(){t.showPreview=="Full"?L(t):t.showPreview=="Glow Only"&&L(t,()=>{},!0)}let H;function z(c=!0){var y=document.createElement("a");c?y.href=h.toDataURL():y.href=f.toDataURL(),y.download=t.imgname+"-superbloomed.png",y.click()}let U=!1,he,D=!0;function F(){let c=Object.assign({},t);delete c.baseIMG,delete c.imgname,delete c.showPreview,delete c.previewQuality;let y=new Blob([JSON.stringify(c)],{type:"application/json"}),ue=document.createElement("a");ue.href=URL.createObjectURL(y),ue.download="superbloom-preset.json",ue.click()}function S(c){typeof c=="string"&&(c=JSON.parse(c));for(let y in c)n(0,t[y]=c[y],t);I()}let fe;ci(async()=>{if(Ii.url.searchParams.get("isPhotopeaPlugin")=="yessir"){n(6,he=new Hl(window.parent)),n(5,U=!0);let y=await he.exportImage("png");var c=new Image;c.addEventListener("load",function(){n(1,u.width=this.width,u),n(1,u.height=this.height,u),L(t),n(7,D=!1)}),c.src=URL.createObjectURL(y),n(0,t.baseIMG=c,t)}});function ee(c){Ct[c?"unshift":"push"](()=>{fe=c,n(8,fe)})}const te=()=>{let c=fe.files[0],y=new FileReader;y.addEventListener("loadend",ue=>{S(ue.target.result)}),y.readAsText(c)},E=c=>{c.target.value=="IMPORT_FROM_COMPUTER"?fe.click():S(c.target.value),c.target.value="nothing"};function k(){t.threshold=R(this.value),n(0,t)}function le(){t.threshold=R(this.value),n(0,t)}function G(){t.glowLayers=R(this.value),n(0,t)}function ie(){t.glowLayers=R(this.value),n(0,t)}function N(){t.glowRadius=R(this.value),n(0,t)}function Ue(){t.glowRadius=R(this.value),n(0,t)}function vt(){t.colorize=this.checked,n(0,t)}function T(){t.tintcolor=this.value,n(0,t)}function ye(){t.tintopacity=R(this.value),n(0,t)}function Te(){t.tintopacity=R(this.value),n(0,t)}function Lt(){t.brightness=R(this.value),n(0,t)}function gt(){t.brightness=R(this.value),n(0,t)}function me(){t.saturation=R(this.value),n(0,t)}function Q(){t.saturation=R(this.value),n(0,t)}function wt(){t.hue=R(this.value),n(0,t)}function x(){t.hue=R(this.value),n(0,t)}function _t(){t.anamorph=R(this.value),n(0,t)}function Ce(){t.anamorph=R(this.value),n(0,t)}function Ie(){t.showPreview=mi(this),n(0,t)}function Pt(){t.previewQuality=R(this.value),n(0,t)}function bt(){t.previewQuality=R(this.value),n(0,t)}const _e=()=>{let c=t.previewQuality;n(0,t.previewQuality=1,t),L(t,()=>{z(!1),n(0,t.previewQuality=c,t)},!1)},j=()=>{let c=t.previewQuality;n(0,t.previewQuality=1,t),L(t,()=>{z(!0),n(0,t.previewQuality=c,t)},!0)},yt=()=>{let c=t.previewQuality;n(0,t.previewQuality=1,t),L(t,async function(){await he.openFromURL(h.toDataURL(),!0),await he.runScript('app.activeDocument.activeLayer.blendMode = "scrn";'),await he.runScript('app.activeDocument.activeLayer.name = "SuperBloom";'),n(0,t.previewQuality=c,t)},!0)};function A(c){Ct[c?"unshift":"push"](()=>{u=c,n(1,u)})}function Tt(c){Ct[c?"unshift":"push"](()=>{h=c,n(2,h)})}function Le(c){Ct[c?"unshift":"push"](()=>{f=c,n(3,f)})}function Pe(c){Ct[c?"unshift":"push"](()=>{H=c,n(4,H)})}return[t,u,h,f,H,U,he,D,fe,L,I,z,F,S,ee,te,E,k,le,G,ie,N,Ue,vt,T,ye,Te,Lt,gt,me,Q,wt,x,_t,Ce,Ie,Pt,bt,_e,j,yt,A,Tt,Le,Pe,()=>{let c=H.files[0],y=new FileReader;y.addEventListener("loadend",ue=>{let C=new Image;C.src=ue.target.result,n(0,t.baseIMG=C,t),C.addEventListener("load",function(){n(1,u.width=this.width,u),n(1,u.height=this.height,u),L(t),n(7,D=!1)})}),y.readAsDataURL(c),n(0,t.imgname=c.name.split(".").slice(0,-1).join("."),t)},()=>{H.click()}]}class ji extends pi{constructor(s){super(),hi(this,s,Hi,zi,oi,{},null,[-1,-1])}}export{ji as component};
